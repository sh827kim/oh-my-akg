# AGENTS.md

이 문서는 이 저장소에서 작업할 때의 기본 작업 규칙을 정의한다.

## 1) 문서 규칙

- GitHub에 올라갈 문서는 `docs/`에 작성한다.
- 작업 시작 시 관련 계획 문서가 있는지 먼저 확인한다.
- 구조 문서는 아래 체계를 따른다.
  - PRD: `docs/prd/`
  - SPEC: `docs/spec/`
  - DESIGN: `docs/design/`
  - TASK: `docs/tasks/`

## 2) 브랜치/PR 워크플로우 (필수)

- 모든 작업은 **신규 브랜치**에서 시작한다.
- 브랜치 스코프는 큰 기능 단위가 아니라 **Task 단위(예: 1-1)** 로 쪼개서 운영한다.
- 브랜치명은 `codex/<task-name>` 형식을 사용한다.
- 하나의 브랜치에는 하나의 Task만 담고, Task가 바뀌면 새 브랜치를 만든다.
- `main` 브랜치에서 직접 기능 작업/수정 커밋을 하지 않는다.
- 작업 완료 후 PR을 생성하고, 머지 후 작업 브랜치를 삭제한다.
- 다음 작업은 다시 신규 브랜치에서 시작한다.

## 3) 커밋 규칙

- 커밋 메시지는 한국어로 작성한다.
- 제목은 변경 의도를 명확히 표현한다.
- 본문에는 작업 요약을 1~5줄로 작성한다.

## 4) 구현/검증 규칙

- 구조 변경 시 기존 기능 동작을 우선 보존한다.
- 변경 후 최소 검증을 수행한다.
  - 타입체크 (`tsc`)
  - 주요 명령 확인 (`pnpm cli --help`, 필요 시 `pnpm cli status`)
  - 패키징 점검 (`pnpm pack:check`)이 필요한 변경이면 수행
- 검증 불가 항목(환경 제약 등)은 결과와 사유를 기록한다.

## 5) 패키지/런타임 규칙

- CLI의 정식 구현 위치는 `packages/cli`를 사용한다.
- 웹앱은 `apps/web`를 기준으로 작업한다.
- 루트에 중복 엔트리/래퍼를 새로 만들지 않는다(특별한 호환성 사유가 있는 경우만 예외).

## 6) 작업 종료 체크리스트

- 변경 파일이 의도 범위인지 확인
- 불필요한 산출물/캐시가 커밋 대상에 포함되지 않았는지 확인
- 관련 문서(`docs/*`)를 현재 상태와 맞게 업데이트
